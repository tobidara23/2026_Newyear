<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Happy New Year mi Jollof rice</title>
	<meta name="description" content="Our 2025 Memories - a romantic mobile-first digital album" />
	<style>
		/* =========================
			 Variables & Base (Mobile-first)
			 ========================= */
		:root{
			--bg-1: #fff7f6; /* cream */
			--bg-2: #fff1ee; /* warm beige */
			--rose: #e9a6b6; /* soft pink */
			--rose-deep: #d87b95; /* rose gold-ish */
			--gold: #e7c7b3; /* rose-gold accent */
			--muted: #7a6a6a;
			--radius: 16px;
			--glass: rgba(255,255,255,0.6);
			--shadow-soft: 0 8px 20px rgba(216,120,140,0.12);
			--heart-glow: 0 6px 20px rgba(233,166,182,0.24);
			--max-width: 900px;
			--accent: linear-gradient(135deg,#ffdede66,#ffe9e6);
		}

		html,body{height:100%;}
		body{
			margin:0; padding:0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
			background: radial-gradient(circle at 10% 10%, var(--bg-1), var(--bg-2));
			color:#3b2f31; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
			overflow-x:hidden; -webkit-touch-callout:none; touch-action:manipulation;
		}

		/* Container */
		.app{max-width:var(--max-width); margin:0 auto;}

		/* Section common */
		section{min-height:100vh; padding:28px 20px; box-sizing:border-box; display:flex; align-items:center; justify-content:center;}
		.panel{width:100%; max-width:820px; margin:0 auto;}

		/* Hero */
		.hero{position:relative; text-align:center; padding-top:10vh; padding-bottom:8vh;}
		.hero .title{font-size:22px; line-height:1.05; font-weight:700; color:#63343b;}
		.hero .subtitle{margin-top:12px; color:var(--muted); font-size:14px}
		.title .script{display:block; font-family: 'Brush Script MT', 'Segoe Script', 'Bradley Hand', cursive; font-size:28px; color:#8b4150;}
		.start-btn{margin-top:22px; background:linear-gradient(180deg,#ffdfe2,#ffd3df); border-radius:999px; padding:12px 22px; display:inline-flex; gap:10px; align-items:center; box-shadow:var(--shadow-soft); border:0; font-weight:600; font-size:15px;}
		.start-btn:active{transform:translateY(1px);}
		.muted-note{margin-top:14px; font-size:13px; color:#7a5b60}

		/* Floating hearts canvas layering */
		#particle-canvas{position:fixed; inset:0; pointer-events:none; z-index:1}

		/* Memories album (swipeable horizontal cards) */
		.album{position:relative; z-index:2}
		.cards{display:flex; gap:16px; overflow-x:auto; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch; touch-action:pan-x; scroll-behavior:smooth; padding:10px 4px}
		.cards-wrap{position:relative}
		.chev{position:absolute; top:50%; transform:translateY(-50%); width:44px; height:44px; border-radius:50%; display:flex; align-items:center; justify-content:center; background:linear-gradient(180deg,#ffffffdd,#ffeef0dd); box-shadow:var(--shadow-soft); border:0; font-size:22px; color:#8a3f49; z-index:6; opacity:0.92}
		.chev.left{left:6px}
		.chev.right{right:6px}
		.chev:active{transform:translateY(-50%) scale(0.98)}
		.chev[hidden]{display:none}
		.card{min-width:82%; flex:0 0 82%; background:linear-gradient(180deg,#fff8f8,#fff0ef); border-radius:18px; padding:16px; box-shadow:var(--shadow-soft); scroll-snap-align:center;}
		.card .photo{height:180px; border-radius:12px; background:linear-gradient(135deg,#ffdfe6,#ffeef0); display:flex; align-items:center; justify-content:center; color:#8b4b56; font-weight:600; overflow:hidden}
		.card .photo img{width:100%; height:100%; object-fit:cover; display:block}
		.card h3{margin:12px 0 6px; font-size:16px}
		.card p{margin:0; color:var(--muted); font-size:14px}

		/* Love letter */
		.love-letter{border-radius:18px; padding:20px; background:linear-gradient(135deg,#fff7f7,#fff3f2); box-shadow:var(--shadow-soft);}
		.love-letter .script{font-family: 'Brush Script MT','Segoe Script',cursive; font-size:20px; color:#8a3f49}
		.reveal{overflow:hidden}
		.reveal p{transform:translateY(18px); opacity:0; transition:all 800ms ease;}
		.reveal.visible p{transform:translateY(0); opacity:1}

		/* Music player */
		.music-player{position:fixed; right:16px; bottom:20px; background:linear-gradient(180deg,#fff,#ffeef0); border-radius:999px; padding:8px; box-shadow:var(--shadow-soft); display:flex; gap:8px; align-items:center; z-index:4}
		.mp-btn{width:44px; height:44px; border-radius:50%; background:linear-gradient(180deg,#ffdfe6,#ffd3d6); border:0; display:flex; align-items:center; justify-content:center; font-size:18px}
		.mp-track{font-size:12px; color:#6b4e51; padding-right:12px}

		/* Game */
		.game-canvas{width:100%; height:320px; border-radius:14px; background:linear-gradient(180deg,#fff6f7,#fff0f1); box-shadow:var(--shadow-soft); display:block}
		.game-hint{font-size:13px; color:var(--muted); margin-top:8px}

		/* Bridge of Hearts game styles */
		.bridge{position:relative; width:100%; height:240px; border-radius:14px; background:linear-gradient(180deg,#fff7f8,#fff1f2); box-shadow:var(--shadow-soft); display:flex; align-items:center; justify-content:center; overflow:hidden}
		.heart{position:absolute; bottom:28%; width:72px; height:72px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:34px; box-shadow:var(--heart-glow); transform:translateY(8px); transition:left 220ms cubic-bezier(.22,.9,.3,1), right 220ms cubic-bezier(.22,.9,.3,1), transform 260ms}
		.heart.left{left:6%;}
		.heart.right{right:6%;}
		.rope{position:absolute; left:12%; right:12%; height:6px; border-radius:999px; background:linear-gradient(90deg,#ffdfe6,#ffd3df); top:50%; transform:translateY(-50%); box-shadow:0 4px 14px rgba(216,120,140,0.08)}
		.game-messages{margin-top:8px; font-size:13px; color:var(--muted); min-height:22px}

		@media(max-width:420px){
			.bridge{height:200px}
			.heart{width:60px;height:60px;font-size:28px}
		}
		.heart.met{transform:translateY(0) scale(1.14)}
		.rope.meet{opacity:0.12; transform:translateY(-50%) scaleX(0.6)}

		/* Promises & Closing */
		.promises{display:flex; flex-direction:column; gap:12px}
		.promise{background:linear-gradient(90deg,#fff7f6,#fff0ef); padding:16px; border-radius:12px; box-shadow:var(--heart-glow)}

		/* Footer / ending */
		.ending{text-align:center}

		/* Accessibility and small screens */
		button{font-family:inherit}
		@media(min-width:800px){
			.card{min-width:46%; flex-basis:46%}
			.title{font-size:28px}
			.hero .subtitle{font-size:16px}
		}
	</style>
</head>
<body>
	<canvas id="particle-canvas" aria-hidden="true"></canvas>
	<div class="app" id="app">
		<!-- HERO -->
		<section id="hero" class="hero" role="region" aria-label="Intro">
			<div class="panel">
				<div class="title">
					<span class="script">To the One Who Made 2025 Unforgettable ‚ù§Ô∏è</span>
				</div>
				<div class="subtitle">Every laugh, every call, every midnight message ,it turned our distance into devotion. Thank you for staying, believing, and loving.</div>
				<div style="text-align:center">
					<button class="start-btn" id="startBtn" aria-label="Start Our Story">Start Our Story</button>
				</div>
				<div class="muted-note">Tap to begin | made with love.</div>
			</div>
		</section>

		<!-- MEMORIES ALBUM -->
		<section id="album" role="region" aria-label="Our Memories">
			<div class="panel album">
				<h2 style="margin:0 0 12px">Our core Memories</h2>
								<div class="cards-wrap">
									<button class="chev left" id="chevPrev" aria-label="Previous" hidden>‚Äπ</button>
									<div class="cards" id="cards" tabindex="0" aria-roledescription="carousel" aria-label="Swipe through months and moments">
										<!-- Cards will be injected by JS -->
									</div>
									<button class="chev right" id="chevNext" aria-label="Next" hidden>‚Ä∫</button>
								</div>
				<div style="margin-top:10px; font-size:13px; color:var(--muted)">Swipe cards to relive moments. Tap a card to read the note.</div>
			</div>
		</section>

		<!-- LOVE LETTER -->
		<section id="letter" role="region" aria-label="Love Letter">
			<div class="panel love-letter">
				<div class="script" style="font-size:18px; margin-bottom:6px">My Love,</div>
				<div class="reveal" id="letterReveal">
					<p>
						I am grateful for your patience through our miles apart. You taught me gentleness, courage, and how to love wholly from a distance. Your laughter warmed the coldest days, and your voice became my home.
					</p>
					<p>
						Thank you for believing in us, for holding our promises, and for making me a better person. I carry you with me in every quiet moment by day, by night, always.
					</p>
				</div>
			</div>
		</section>

		<!-- MUSIC PLAYER (floating) -->
		<div class="music-player" role="region" aria-label="Background music player">
			<div class="mp-track" id="mpTrack">There_Is_A_Light_That_Never_Goes_Out</div>
			<button class="mp-btn" id="mpToggle" aria-pressed="false" aria-label="Play music">‚ñ∂</button>
			<input id="mpVol" type="range" min="0" max="1" step="0.01" value="0.6" style="width:80px" aria-label="Volume control">
		</div>
		<audio id="bg-audio" loop preload="auto">
			<source src="assets/The_Smiths_-_There_Is_A_Light_That_Never_Goes_Out_LIVE_(mp3.pm).mp3" type="audio/mpeg">
			<!-- Optional: place a file named "music.mp3" in this folder to use a custom track. Otherwise a gentle generated pad will play. -->
		</audio>

		<!-- GAME: Bridge of Hearts (responsive, touch-first) -->
		<section id="game" role="region" aria-label="Long distance game">
			<div class="panel">
				<h3 style="margin-top:0">Bridge of Hearts</h3>
				<div id="bridge" class="bridge" aria-hidden="false">
					<div id="heartLeft" class="heart left" aria-hidden="true">‚ù§</div>
					<div id="rope" class="rope" aria-hidden="true"></div>
					<div id="heartRight" class="heart right" aria-hidden="true">‚ù§</div>
				</div>
				<div class="game-hint">Tap left or right to pull hearts closer. Alternate sides for bigger progress.</div>
				<div id="gameMessages" class="game-messages" aria-live="polite"></div>
			</div>
		</section>

		<!-- PROMISES -->
		<section id="promises" role="region" aria-label="Promises and future">
<div class="panel promises">
  <h3 style="margin-top:0">Promises For Our Future</h3>

  <div class="promise">
    Promise 1: To always make time for you  no matter how busy life gets 
    because you are never an option, you are my priority.
  </div>

  <div class="promise">
    Promise 2: To communicate with honesty and patience, even on hard days,
    and to listen with love, not defensiveness.
  </div>

  <div class="promise">
    Promise 3: To show up consistently  through distance, delays, and doubts 
    and never let you question my commitment to us.
  </div>

  <div class="promise">
    Promise 4: To celebrate your growth, support your dreams,
    and remind you every day how proud I am of you.
  </div>

  <div class="promise">
    Promise 5: To keep choosing you, choosing us, and choosing love 
    even when it‚Äôs not easy, even when we‚Äôre far apart.
  </div>
</div>

		</section>

		<!-- ENDING -->
		<section id="ending" class="ending" role="region" aria-label="Ending">
			<div class="panel">
				<h2 style="margin:0 0 12px">Thank you for being my love, my peace, and my forever.</h2>
				<div style="font-size:16px; color:var(--muted); margin-bottom:12px">Happy New Year ‚ù§Ô∏è</div>
				<div class="muted-note">Music will gently fade out when you reach the end.</div>
			</div>
		</section>
	</div>

	<script>
		/* =========================
			 Helper data and utilities
			 ========================= */
		const months = [
			{title:'üí´ Our Story', caption:'Each moment here whispers a story of love, patience, and us.', note:'youre always in my heart.'},
			{title:'üåç Across the Miles', caption:'Even miles apart, these moments kept us close.', note:'Your voice made miles disappear.'},
			{title:'üïäÔ∏è What Carried Us', caption:'Through every call, every message, every wait these memories carried us.', note:'Sunshine and your smile.'},
			{title:'‚≠ê Written in My Soul', caption:'Some memories fade with time. These live forever in my soul.', note:'Our late night talks.'},
			{title:'üåô Quiet Reminders', caption:'Every moment we shared became a quiet reminder that loving you is my favorite thing.', note:'You are my favorite thing.'}
		];

		// Smooth scroll helper
		function smoothScrollTo(el){
			el.scrollIntoView({behavior:'smooth', block:'start'});
		}

		/* =========================
			 HERO -> Start Button
			 ========================= */
		document.getElementById('startBtn').addEventListener('click', ()=>{
			smoothScrollTo(document.getElementById('album'));
			// gentle particle burst
			burstHearts(12);
		});

		/* =========================
			 Inject album cards
			 ========================= */
		const cardsEl = document.getElementById('cards');
		months.forEach((m,i)=>{
			const card = document.createElement('div'); card.className='card'; card.tabIndex=0;
			card.innerHTML = `<div class="photo"><img src="assets/photo${i+1}.png" alt="${m.title}"></div><h3>${m.title}</h3><p>${m.caption}</p><details style="margin-top:10px"><summary style="cursor:pointer">Read note</summary><div style="margin-top:8px;color:var(--muted)">${m.note}</div></details>`;
			cardsEl.appendChild(card);
		});

		// Allow native horizontal swipe on touch devices. Add keyboard support and chevrons for tap-to-scroll.
		cardsEl.tabIndex = 0;
		cardsEl.addEventListener('keydown', (e)=>{
			if(e.key === 'ArrowRight'){ cardsEl.scrollBy({left: cardsEl.clientWidth * 0.86, behavior:'smooth'}); }
			if(e.key === 'ArrowLeft'){ cardsEl.scrollBy({left: -cardsEl.clientWidth * 0.86, behavior:'smooth'}); }
		});

		// chevron controls
		const chevPrev = document.getElementById('chevPrev');
		const chevNext = document.getElementById('chevNext');
		function updateChevrons(){
			// show/hide chevrons depending on scroll position
			const maxScroll = cardsEl.scrollWidth - cardsEl.clientWidth - 2;
			if(cardsEl.scrollLeft > 8) chevPrev.removeAttribute('hidden'); else chevPrev.setAttribute('hidden', '');
			if(cardsEl.scrollLeft < maxScroll - 8) chevNext.removeAttribute('hidden'); else chevNext.setAttribute('hidden', '');
		}
		chevPrev.addEventListener('click', ()=>{ cardsEl.scrollBy({left: -Math.round(cardsEl.clientWidth*0.86), behavior:'smooth'}); });
		chevNext.addEventListener('click', ()=>{ cardsEl.scrollBy({left: Math.round(cardsEl.clientWidth*0.86), behavior:'smooth'}); });
		cardsEl.addEventListener('scroll', ()=>{ updateChevrons(); });
		// initial chevron visibility
		setTimeout(updateChevrons,120);

		/* =========================
			 Reveal letter on scroll into view
			 ========================= */
		const letter = document.getElementById('letterReveal');
		const obs = new IntersectionObserver((entries)=>{
			entries.forEach(en=>{ if(en.isIntersecting) en.target.classList.add('visible'); })
		},{threshold:0.15});
		obs.observe(letter);

		/* =========================
			 Particles: floating hearts
			 ========================= */
		const canvas = document.getElementById('particle-canvas');
		const ctx = canvas.getContext('2d');
		let DPR = window.devicePixelRatio || 1;
		function resizeCanvas(){ canvas.width = innerWidth * DPR; canvas.height = innerHeight * DPR; canvas.style.width = innerWidth+'px'; canvas.style.height = innerHeight+'px'; ctx.scale(DPR,DPR); }
		resizeCanvas(); window.addEventListener('resize', ()=>{ DPR = window.devicePixelRatio || 1; resizeCanvas(); });

		let hearts = [];
		function random(min,max){return Math.random()*(max-min)+min}
		function makeHeart(){
			return {x:random(20,innerWidth-20), y:innerHeight+20, vx:random(-0.3,0.3), vy:random(-1.2,-0.6), size:random(8,22), alpha:random(0.6,1)}
		}
		for(let i=0;i<18;i++) hearts.push(makeHeart());
		function drawHeart(x,y,s,alpha){
			ctx.save(); ctx.translate(x,y); ctx.scale(s/24,s/24); ctx.beginPath(); ctx.fillStyle = `rgba(233,166,182,${alpha})`;
			ctx.moveTo(0,-8); ctx.bezierCurveTo(6,-18,18,-18,18,-6); ctx.bezierCurveTo(18,4,10,12,0,20); ctx.bezierCurveTo(-10,12,-18,4,-18,-6); ctx.bezierCurveTo(-18,-18,-6,-18,0,-8); ctx.fill(); ctx.restore();
		}
		function tick(){ ctx.clearRect(0,0,innerWidth,innerHeight); hearts.forEach(h=>{ h.x += h.vx; h.y += h.vy; h.alpha -= 0.001; drawHeart(h.x,h.y,h.size,h.alpha); if(h.y < -40 || h.alpha<=0){ Object.assign(h, makeHeart()); h.y = innerHeight + random(10,120); } }); requestAnimationFrame(tick); }
		tick();

		function burstHearts(n=10){ for(let i=0;i<n;i++){ const h = makeHeart(); h.x = innerWidth/2+random(-70,70); h.y = innerHeight/2+random(-70,70); h.vy = random(-4,-1); hearts.push(h); } }

		/* =========================
			 Music player controls with fade
			 ========================= */
		const audio = document.getElementById('bg-audio');
		const mpToggle = document.getElementById('mpToggle');
		const mpVol = document.getElementById('mpVol');
		let fadeInterval=null;
		// WebAudio fallback (gentle pad) when no music.mp3 present
		let audioCtx = null, webGain = null, webOscs = [], webPlaying = false, usingAudioFile = false;

		async function setupMusicSource(){
			try{
				const res = await fetch('assets/The_Smiths_-_There_Is_A_Light_That_Never_Goes_Out_LIVE_(mp3.pm).mp3', {method:'HEAD'});
				if(res.ok) { usingAudioFile = true; mpTrack.textContent = 'There_Is_A_Light_That_Never_Goes_Out (file)'; return; }
			}catch(e){ /* ignore */ }
			// fallback: generated pad
			initWebAudio();
			mpTrack.textContent = 'There_Is_A_Light_That_Never_Goes_Out';
		}

		function initWebAudio(){
			audioCtx = new (window.AudioContext||window.webkitAudioContext)();
			webGain = audioCtx.createGain(); webGain.gain.value = 0; webGain.connect(audioCtx.destination);
			// layered oscillators for a warm pad
			const freqs = [220, 277.18, 329.63];
			freqs.forEach((f,i)=>{
				const osc = audioCtx.createOscillator(); osc.type = i===1 ? 'sine' : 'triangle'; osc.frequency.value = f * (1 + (i*0.01));
				const g = audioCtx.createGain(); g.gain.value = 0.15;
				osc.connect(g); g.connect(webGain); osc.start(0);
				webOscs.push({osc,g});
			});
		}

		function fadeTo(target, duration=800){ clearInterval(fadeInterval); const start = audio.volume; const startTime = Date.now(); fadeInterval = setInterval(()=>{ const t = Math.min(1,(Date.now()-startTime)/duration); audio.volume = start + (target-start)*t; if(t>=1) clearInterval(fadeInterval); }, 30); }

		mpToggle.addEventListener('click', async ()=>{
			if(usingAudioFile){
				if(audio.paused){ audio.volume = parseFloat(mpVol.value); await audio.play().catch(()=>{}); mpToggle.textContent='‚è∏'; mpToggle.setAttribute('aria-pressed','true'); mpToggle.title='Pause'; }
				else { fadeTo(0,500); setTimeout(()=>{ audio.pause(); mpToggle.textContent='‚ñ∂'; mpToggle.setAttribute('aria-pressed','false'); },520); }
			} else {
				// web audio
				if(!audioCtx) initWebAudio();
				if(!webPlaying){ if(audioCtx.state==='suspended') await audioCtx.resume(); webGain.gain.cancelScheduledValues(audioCtx.currentTime); webGain.gain.linearRampToValueAtTime(parseFloat(mpVol.value)||0.6, audioCtx.currentTime+0.6); webPlaying=true; mpToggle.textContent='‚è∏'; mpToggle.setAttribute('aria-pressed','true'); }
				else { webGain.gain.cancelScheduledValues(audioCtx.currentTime); webGain.gain.linearRampToValueAtTime(0, audioCtx.currentTime+0.5); webPlaying=false; mpToggle.textContent='‚ñ∂'; mpToggle.setAttribute('aria-pressed','false'); }
			}
		});
		mpVol.addEventListener('input', (e)=>{ const v = parseFloat(e.target.value); if(usingAudioFile) audio.volume = v; else if(webGain) webGain.gain.setValueAtTime(v, audioCtx.currentTime); });

		// Gentle auto-play hint: many browsers block autoplay with sound; we'll wait for a gesture
		['touchstart','click'].forEach(evt=>{ window.addEventListener(evt, async function once(){ if(usingAudioFile){ if(audio.paused){ audio.volume = parseFloat(mpVol.value); audio.play().catch(()=>{}); mpToggle.textContent='‚è∏'; mpToggle.setAttribute('aria-pressed','true'); } } else { if(!audioCtx) initWebAudio(); if(audioCtx.state==='suspended') await audioCtx.resume(); webGain.gain.linearRampToValueAtTime(parseFloat(mpVol.value)||0.6, audioCtx.currentTime+0.6); webPlaying=true; mpToggle.textContent='‚è∏'; mpToggle.setAttribute('aria-pressed','true'); } window.removeEventListener(evt, once); }); });

		// initialize music source detection
		setupMusicSource();

		/* =========================
			 Game: Bridge of Hearts (responsive, touch-first)
			 ========================= */
		(function(){
			const leftEl = document.getElementById('heartLeft');
			const rightEl = document.getElementById('heartRight');
			const ropeEl = document.getElementById('rope');
			const bridge = document.getElementById('bridge');
			const msgEl = document.getElementById('gameMessages');

			let leftPct = 6; // percent from left
			let rightPct = 94; // percent from left (so right side = 100 - rightPct)
			const minGap = 12; // percent gap when they meet
			let lastTap = null;
			let meeting = false;
			const messages = ['I miss you','Counting minutes until next time','Your laugh is my favorite','Holding you close in thought'];
			let msgIndex = 0;

			// smooth current positions for nice animation
			let curLeft = leftPct, curRight = rightPct;

			function render(){
				// lerp
				curLeft += (leftPct - curLeft) * 0.22;
				curRight += (rightPct - curRight) * 0.22;
				leftEl.style.left = curLeft + '%';
				rightEl.style.right = (100 - curRight) + '%';
				// rope visual stretch based on distance
				const dist = curRight - curLeft;
				const scaleX = Math.max(0.2, (dist/90));
				ropeEl.style.transform = `translateY(-50%) scaleX(${scaleX})`;
				if(!meeting) requestAnimationFrame(render);
			}
			requestAnimationFrame(render);

			function pushMessage(){ msgEl.textContent = messages[msgIndex++ % messages.length]; }

			function checkMeet(){
				if(meeting) return;
				if(rightPct - leftPct <= minGap){ meeting = true; // animate meet
					leftEl.classList.add('met'); rightEl.classList.add('met'); ropeEl.classList.add('meet');
					msgEl.textContent = 'No matter the distance, my heart always finds yours.';
					burstHearts(20);
				}
			}

			function tap(side){
				if(meeting) return;
				const altBonus = lastTap && lastTap !== side ? 3 : 1.5;
				const deltaBase = 2.6;
				if(side === 'left'){
					rightPct = Math.max(leftPct + 6, rightPct - deltaBase * altBonus);
				} else {
					leftPct = Math.min(rightPct - 6, leftPct + deltaBase * altBonus);
				}
				lastTap = side;
				pushMessage();
				checkMeet();
			}

			// handle pointer on bridge: detect left/right half
			bridge.addEventListener('pointerdown', (e)=>{
				const r = bridge.getBoundingClientRect();
				const x = e.clientX - r.left;
				const side = x < r.width/2 ? 'left' : 'right';
				tap(side);
			});

			// also support double-tap or swipe quick gestures
			let lastPointerX = null;
			bridge.addEventListener('pointermove', (e)=>{ if(e.pressure>0 || e.buttons){ lastPointerX = e.clientX; } });
			bridge.addEventListener('pointerup', (e)=>{ lastPointerX = null; });

			// expose small reset on long-press (for testing)
			let holdT = null;
			bridge.addEventListener('pointerdown', ()=>{ holdT = setTimeout(()=>{ leftPct=6; rightPct=94; meeting=false; leftEl.classList.remove('met'); rightEl.classList.remove('met'); ropeEl.classList.remove('meet'); msgEl.textContent='Keep going ‚Äî we are close.'; },1200); });
			bridge.addEventListener('pointerup', ()=>{ clearTimeout(holdT); holdT=null; });
		})();

		/* =========================
			 Simple section swipe navigation (vertical)
			 ========================= */
		(function(){
			const sections = Array.from(document.querySelectorAll('section'));
			let current = 0;
			let startY, isSw=false;
			document.addEventListener('touchstart', (e)=>{ startY = e.touches[0].clientY; isSw = true; });
			document.addEventListener('touchmove', (e)=>{ if(!isSw) return; const dy = e.touches[0].clientY - startY; if(Math.abs(dy)>60){ if(dy<0 && current<sections.length-1){ current++; sections[current].scrollIntoView({behavior:'smooth'}); isSw=false;} else if(dy>0 && current>0){ current--; sections[current].scrollIntoView({behavior:'smooth'}); isSw=false;} } });
		})();

		/* =========================
			 When user reaches END, fade music out
			 ========================= */
		const ending = document.getElementById('ending');
		const endObs = new IntersectionObserver(entries=>{ entries.forEach(en=>{ if(en.isIntersecting){ fadeTo(0,1200); setTimeout(()=>audio.pause(),1250); } }) },{threshold:0.6});
		endObs.observe(ending);

		// initial tiny burst for atmosphere
		setTimeout(()=>burstHearts(8),800);
	</script>
</body>
</html>

